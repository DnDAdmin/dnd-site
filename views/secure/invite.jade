extends ../layout

block head
  title= title + 'New Invitation'

  style.
    .errorText {
        position: relative;
        color: red;
        font-size: 11pt;
        transition: .5s;
    }

block content
    div(class='row mt-5')
        form#inviteForm(class='col-11 col-md-6 mx-auto' name='invitation' action='/sendinvite' method="POST" enctype="multipart/form-data")
            div(class='siteCont')
                h2(class='text-center') New Member Invitation
                input#name(class='formTextInput' type='text' name='name' placeholder='Name (optional)')
                input#email(class='formTextInput mt-2' type='text' data-req='true' name='email' placeholder='Email Address')
                
                div(class='w-100 text-right mt-2')
                    button#formButton(class='buttonMain button w-100 col-md-4' style='right: 0;' onclick="updateDataBase()")
                        div(class='buttonText')
                            p#saveText() Send
            div(class='mt-2')
                ul#errorText(class='w-100 px-3 mx-auto errorText' style='display: none;')
                    
        
      
    
    script.
        var info = {}
        var orig = {}
        var img
        var origImg
        var form = document.querySelector('form')

        form.addEventListener('submit', e => {
            e.preventDefault();
        });


        async function updateDataBase() {
            await checkForErrors(false)
            document.getElementById('passForm').submit()
        }

        function togglePass(show) {
            var passCont = document.getElementById('newPass')
            var passBut = document.getElementById('passBut')
            var fields = passCont.children
            if(show) {
                passCont.style.display = 'block'
                passBut.classList.remove('saveButtonVisible')
            } else {
                passCont.style.display = 'none'
                passBut.classList.add('saveButtonVisible')
                fields[0].value = ''
                fields[1].value = ''
            }
        }